# Cursor 规则文件使用说明

## 规则文件位置

本项目包含两个 `.cursorrules` 文件：

1. **项目根目录** (`/.cursorrules`) - 工作区通用规则
2. **Server 目录** (`/server/.cursorrules`) - Server 项目专用规则

## 如何确保规则生效

### 方法 1：自动加载（推荐）

Cursor IDE 会自动在以下位置查找 `.cursorrules` 文件：

1. **当前工作目录** - 如果打开的文件在 `server/` 目录下，Cursor 会优先查找 `server/.cursorrules`
2. **项目根目录** - 如果当前目录没有规则文件，会查找项目根目录的 `.cursorrules`
3. **用户主目录** - 全局规则（如果存在）

**最佳实践**：
- 在 `server/` 目录下工作时，Cursor 会自动加载 `server/.cursorrules`
- 确保文件名为 `.cursorrules`（注意前面的点）
- 文件必须位于项目根目录或当前工作目录

### 方法 2：验证规则是否生效

#### 检查方法 1：查看 Cursor 设置
1. 打开 Cursor 设置（`Ctrl+,` 或 `Cmd+,`）
2. 搜索 "rules" 或 "cursor rules"
3. 查看是否显示了规则文件路径

#### 检查方法 2：测试 AI 响应
向 AI 助手提问，例如：
- "创建一个新的 NestJS 模块"
- "创建一个用户实体"

如果 AI 的响应遵循了 `.cursorrules` 中的规范（如使用中文注释、正确的命名规范等），说明规则已生效。

#### 检查方法 3：查看文件
确认以下文件存在：
```bash
# 项目根目录
/.cursorrules

# Server 目录
/server/.cursorrules
```

### 方法 3：手动指定规则文件

如果自动加载不工作，可以：

1. **重启 Cursor IDE**
   - 完全关闭 Cursor
   - 重新打开项目
   - Cursor 会重新扫描规则文件

2. **检查文件权限**
   - 确保 `.cursorrules` 文件可读
   - 确保文件没有被 `.gitignore` 忽略（规则文件应该提交到版本控制）

3. **检查文件格式**
   - 确保文件是 UTF-8 编码
   - 确保文件使用 Markdown 格式
   - 确保文件名正确（`.cursorrules`，不是 `.cursorrules.txt`）

## 规则文件内容

`server/.cursorrules` 包含以下规范：

- ✅ 项目概述和技术栈
- ✅ 代码风格规范（缩进、引号、命名）
- ✅ 架构模式（模块化、分层）
- ✅ DTO 和验证规范
- ✅ 异常处理规范
- ✅ 日志规范
- ✅ 数据库和 ORM 规范
- ✅ API 设计规范
- ✅ 认证和授权规范
- ✅ 配置管理规范
- ✅ 测试规范
- ✅ 安全规范
- ✅ 性能优化建议
- ✅ 代码注释规范
- ✅ 禁止事项和推荐实践

## 常见问题

### Q: 规则文件修改后不生效？
A: 
1. 重启 Cursor IDE
2. 确保文件保存成功
3. 检查文件路径是否正确

### Q: 如何在多个项目中使用不同的规则？
A: 
- 在每个子项目目录创建独立的 `.cursorrules` 文件
- Cursor 会根据当前打开的文件所在目录自动选择规则文件

### Q: 规则文件应该提交到版本控制吗？
A: 
- **应该**提交到版本控制
- `.cursorrules` 文件不包含敏感信息
- 团队成员可以共享相同的代码规范

### Q: 如何验证规则是否被应用？
A: 
- 向 AI 助手提问，观察响应是否符合规范
- 检查生成的代码是否遵循命名规范、注释规范等
- 查看 Cursor 设置中的规则文件路径

## 更新规则

如果需要更新规则：

1. 编辑 `server/.cursorrules` 文件
2. 保存文件
3. 重启 Cursor IDE（推荐）或等待自动重新加载
4. 测试规则是否生效

## 最佳实践

1. ✅ **保持规则文件简洁明了** - 只包含必要的规范
2. ✅ **定期更新规则** - 随着项目发展更新规范
3. ✅ **团队共享** - 确保所有团队成员使用相同的规则
4. ✅ **文档化** - 在规则文件中添加清晰的说明和示例
5. ✅ **测试验证** - 定期测试规则是否正常工作

## 相关文档

- [FRAMEWORK.md](./FRAMEWORK.md) - 项目框架结构说明
- [README.md](./README.md) - 项目快速开始指南
- [ENV_SETUP.md](./ENV_SETUP.md) - 环境变量配置说明

